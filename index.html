<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Ban Manager | INNOCENT TECH STUDIOS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --gold: #FFD700;
            --yellow: #FFEB3B;
            --green: #4CAF50;
            --blue: #2196F3;
            --pink: #E91E63;
            --light-text: #ffffff;
            --dark-text: #333333;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--gold), var(--yellow));
            color: var(--dark-text);
            padding: 1.5rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.5rem;
            margin-right: 10px;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
        }

        .creator-tag {
            font-size: 1rem;
            color: rgba(0, 0, 0, 0.7);
            font-style: italic;
        }

        .creator-name {
            font-weight: bold;
            color: #E91E63;
            text-shadow: 0 0 5px rgba(233, 30, 99, 0.3);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Card Styles */
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            padding: 20px;
            margin-bottom: 20px;
        }

        .card h2 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }

        /* Input Section - Green */
        .input-section .card {
            border-top: 5px solid var(--green);
        }

        .input-section h2 {
            color: var(--green);
            border-bottom-color: var(--green);
        }

        /* Banned List Section - Blue */
        .banned-section .card {
            border-top: 5px solid var(--blue);
        }

        .banned-section h2 {
            color: var(--blue);
            border-bottom-color: var(--blue);
        }

        /* Stats Section - Pink */
        .stats-section .card {
            border-top: 5px solid var(--pink);
        }

        .stats-section h2 {
            color: var(--pink);
            border-bottom-color: var(--pink);
        }

        /* Input Group */
        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        textarea, input[type="text"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            resize: vertical;
        }

        textarea {
            min-height: 120px;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            background-color: var(--green);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-blue {
            background-color: var(--blue);
        }

        .btn-pink {
            background-color: var(--pink);
        }

        .btn-yellow {
            background-color: var(--yellow);
            color: var(--dark-text);
        }

        .btn-gold {
            background-color: var(--gold);
            color: var(--dark-text);
        }

        .btn-danger {
            background-color: #dc3545;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        /* Banned List */
        .banned-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
        }

        .banned-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }

        .banned-item:hover {
            background-color: #f9f9f9;
        }

        .banned-item:last-child {
            border-bottom: none;
        }

        .banned-number {
            font-weight: 500;
        }

        .ban-type {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 10px;
            color: white;
            margin-left: 10px;
        }

        .ban-permanent {
            background-color: var(--pink);
        }

        .ban-temporary {
            background-color: var(--blue);
        }

        .banned-actions {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 14px;
            transition: color 0.3s;
        }

        .action-btn:hover {
            color: var(--pink);
        }

        .empty-state {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--green);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            border-left-color: #dc3545;
        }

        .notification.warning {
            border-left-color: var(--yellow);
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--blue), #1976D2);
            color: var(--light-text);
            padding: 1.5rem 0;
            text-align: center;
            margin-top: 30px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copyright {
            font-size: 0.9rem;
        }

        .social-links {
            display: flex;
            gap: 10px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--light-text);
            text-decoration: none;
            transition: background 0.3s;
        }

        .social-links a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 576px) {
            .footer-content {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <i class="fab fa-whatsapp"></i>
                <h1>WhatsApp Ban Manager</h1>
            </div>
            <div class="creator-tag">
                Created by <span class="creator-name">INNOCENT TECH STUDIOS</span>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="input-section">
                <div class="card">
                    <h2>Add Numbers to Ban</h2>
                    <div class="input-group">
                        <label for="phoneInput">Enter Phone Numbers (one per line or comma separated)</label>
                        <textarea id="phoneInput" placeholder="e.g. +1234567890, +1987654321"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="banType">Ban Type</label>
                        <select id="banType">
                            <option value="temporary">Temporary Ban (30 days)</option>
                            <option value="permanent">Permanent Ban</option>
                            <option value="custom">Custom Duration</option>
                        </select>
                    </div>
                    <div class="input-group" id="customDurationGroup" style="display: none;">
                        <label for="customDays">Custom Ban Duration (days)</label>
                        <input type="number" id="customDays" min="1" max="365" value="7">
                    </div>
                    <div class="btn-group">
                        <button id="addBtn" class="btn">Add to Ban List</button>
                        <button id="clearInputBtn" class="btn btn-danger">Clear Input</button>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Import/Export</h2>
                    <div class="input-group">
                        <label for="importText">Import Numbers</label>
                        <textarea id="importText" placeholder="Paste numbers to import (one per line or comma separated)"></textarea>
                    </div>
                    <div class="btn-group">
                        <button id="importBtn" class="btn btn-blue">Import Numbers</button>
                        <button id="exportBtn" class="btn btn-yellow">Export Ban List</button>
                    </div>
                    <div class="input-group">
                        <label for="exportFormat">Export Format:</label>
                        <select id="exportFormat">
                            <option value="csv">CSV</option>
                            <option value="txt">Text (one per line)</option>
                            <option value="json">JSON</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="banned-section">
                <div class="card">
                    <h2>Banned Numbers</h2>
                    <div id="bannedList" class="banned-list">
                        <div class="empty-state">No numbers banned yet</div>
                    </div>
                    <div class="btn-group">
                        <button id="clearAllBtn" class="btn btn-danger">Clear All Bans</button>
                        <button id="refreshBtn" class="btn btn-gold">Refresh List</button>
                    </div>
                </div>
                
                <div class="stats-section">
                    <div class="card">
                        <h2>Ban Statistics</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="totalBans">0</div>
                                <div class="stat-label">Total Bans</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="permanentBans">0</div>
                                <div class="stat-label">Permanent</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="temporaryBans">0</div>
                                <div class="stat-label">Temporary</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="activeBans">0</div>
                                <div class="stat-label">Active</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2 style="color: var(--gold); border-bottom-color: var(--gold);">Ban Management Commands</h2>
            <div class="btn-group">
                <button id="tempBanAllBtn" class="btn btn-yellow">Temporary Ban All Numbers</button>
                <button id="permBanAllBtn" class="btn btn-pink">Permanent Ban All Numbers</button>
                <button id="unbanExpiredBtn" class="btn btn-blue">Unban Expired Temporary Bans</button>
                <button id="simulateBanBtn" class="btn btn-gold">Simulate Ban Process</button>
            </div>
            <div id="commandOutput" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px; min-height: 50px; font-family: monospace;"></div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="copyright">
                    <p>WhatsApp Ban Manager &copy; 2023 | Created by <span class="creator-name">INNOCENT TECH STUDIOS</span></p>
                </div>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
    </footer>
    
    <div id="notification" class="notification"></div>
    
    <script>
        // DOM Elements
        const phoneInput = document.getElementById('phoneInput');
        const banType = document.getElementById('banType');
        const customDurationGroup = document.getElementById('customDurationGroup');
        const customDays = document.getElementById('customDays');
        const addBtn = document.getElementById('addBtn');
        const clearInputBtn = document.getElementById('clearInputBtn');
        const bannedList = document.getElementById('bannedList');
        const clearAllBtn = document.getElementById('clearAllBtn');
        const refreshBtn = document.getElementById('refreshBtn');
        const importText = document.getElementById('importText');
        const importBtn = document.getElementById('importBtn');
        const exportBtn = document.getElementById('exportBtn');
        const exportFormat = document.getElementById('exportFormat');
        const notification = document.getElementById('notification');
        const totalBans = document.getElementById('totalBans');
        const permanentBans = document.getElementById('permanentBans');
        const temporaryBans = document.getElementById('temporaryBans');
        const activeBans = document.getElementById('activeBans');
        const tempBanAllBtn = document.getElementById('tempBanAllBtn');
        const permBanAllBtn = document.getElementById('permBanAllBtn');
        const unbanExpiredBtn = document.getElementById('unbanExpiredBtn');
        const simulateBanBtn = document.getElementById('simulateBanBtn');
        const commandOutput = document.getElementById('commandOutput');

        // Initialize banned numbers from localStorage or empty array
        let bannedNumbers = JSON.parse(localStorage.getItem('whatsappBannedNumbers')) || [];
        
        // Show/hide custom duration based on ban type
        banType.addEventListener('change', function() {
            if (this.value === 'custom') {
                customDurationGroup.style.display = 'block';
            } else {
                customDurationGroup.style.display = 'none';
            }
        });

        // Display initial banned numbers
        updateBannedList();
        updateStats();

        // Event Listeners
        addBtn.addEventListener('click', addNumbers);
        clearInputBtn.addEventListener('click', () => {
            phoneInput.value = '';
            phoneInput.focus();
        });
        clearAllBtn.addEventListener('click', clearAllNumbers);
        refreshBtn.addEventListener('click', refreshList);
        importBtn.addEventListener('click', importNumbers);
        exportBtn.addEventListener('click', exportNumbers);
        tempBanAllBtn.addEventListener('click', tempBanAll);
        permBanAllBtn.addEventListener('click', permBanAll);
        unbanExpiredBtn.addEventListener('click', unbanExpired);
        simulateBanBtn.addEventListener('click', simulateBanProcess);

        // Functions
        function addNumbers() {
            const input = phoneInput.value.trim();
            if (!input) {
                showNotification('Please enter at least one phone number', 'error');
                return;
            }
            
            // Parse numbers (support comma separated and new lines)
            const numbers = input.split(/[\n,]+/).map(num => num.trim()).filter(num => num);
            
            let addedCount = 0;
            let duplicatesCount = 0;
            let invalidCount = 0;
            
            // Determine ban duration
            let banDuration = 0;
            let banTypeValue = banType.value;
            
            if (banTypeValue === 'temporary') {
                banDuration = 30; // 30 days
            } else if (banTypeValue === 'permanent') {
                banDuration = -1; // -1 indicates permanent
            } else if (banTypeValue === 'custom') {
                banDuration = parseInt(customDays.value) || 7;
            }
            
            numbers.forEach(number => {
                // Validate and format phone number
                const formattedNumber = formatPhoneNumber(number);
                
                if (!formattedNumber) {
                    invalidCount++;
                    return;
                }
                
                // Check if number is already in the list
                const existingIndex = bannedNumbers.findIndex(item => item.number === formattedNumber);
                if (existingIndex !== -1) {
                    // Update existing ban
                    bannedNumbers[existingIndex].type = banTypeValue;
                    bannedNumbers[existingIndex].duration = banDuration;
                    bannedNumbers[existingIndex].bannedAt = new Date().toISOString();
                    duplicatesCount++;
                } else {
                    // Add to banned list
                    bannedNumbers.push({
                        number: formattedNumber,
                        type: banTypeValue,
                        duration: banDuration,
                        bannedAt: new Date().toISOString()
                    });
                    addedCount++;
                }
            });
            
            // Save to localStorage
            localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
            
            // Update UI
            updateBannedList();
            updateStats();
            
            // Show notification
            let message = `${addedCount} number(s) added to ban list.`;
            if (duplicatesCount > 0) message += ` ${duplicatesCount} existing number(s) updated.`;
            if (invalidCount > 0) message += ` ${invalidCount} invalid number(s) skipped.`;
            
            showNotification(message);
            
            // Clear input if all numbers were processed
            if (addedCount + duplicatesCount === numbers.length) {
                phoneInput.value = '';
            }
        }
        
        function formatPhoneNumber(number) {
            // Remove all non-digit characters except +
            let cleaned = number.replace(/[^\d+]/g, '');
            
            // Ensure it starts with +
            if (!cleaned.startsWith('+')) {
                // If no country code, consider it invalid
                return null;
            }
            
            // Basic validation - at least 8 digits after +
            if (cleaned.length < 9) {
                return null;
            }
            
            return cleaned;
        }
        
        function updateBannedList() {
            // Update list
            if (bannedNumbers.length === 0) {
                bannedList.innerHTML = '<div class="empty-state">No numbers banned yet</div>';
                return;
            }
            
            bannedList.innerHTML = '';
            bannedNumbers.forEach((item, index) => {
                const isExpired = item.type === 'temporary' && isBanExpired(item);
                
                const itemElement = document.createElement('div');
                itemElement.className = 'banned-item';
                if (isExpired) {
                    itemElement.style.opacity = '0.6';
                }
                
                itemElement.innerHTML = `
                    <div>
                        <span class="banned-number">${item.number}</span>
                        <span class="ban-type ${item.type === 'permanent' ? 'ban-permanent' : 'ban-temporary'}">
                            ${item.type === 'permanent' ? 'PERMANENT' : `TEMPORARY (${getDaysLeft(item)} days left)`}
                        </span>
                        ${isExpired ? '<span style="color: #dc3545; font-size: 0.8rem;">(EXPIRED)</span>' : ''}
                    </div>
                    <div class="banned-actions">
                        <button class="action-btn" onclick="removeNumber(${index})">Remove</button>
                        <button class="action-btn" onclick="toggleBanType(${index})">Toggle Type</button>
                    </div>
                `;
                bannedList.appendChild(itemElement);
            });
        }
        
        function updateStats() {
            const total = bannedNumbers.length;
            const permanent = bannedNumbers.filter(item => item.type === 'permanent').length;
            const temporary = bannedNumbers.filter(item => item.type === 'temporary').length;
            const active = bannedNumbers.filter(item => !isBanExpired(item)).length;
            
            totalBans.textContent = total;
            permanentBans.textContent = permanent;
            temporaryBans.textContent = temporary;
            activeBans.textContent = active;
        }
        
        function isBanExpired(banItem) {
            if (banItem.type === 'permanent') return false;
            
            const bannedAt = new Date(banItem.bannedAt);
            const expiresAt = new Date(bannedAt.getTime() + (banItem.duration * 24 * 60 * 60 * 1000));
            return new Date() > expiresAt;
        }
        
        function getDaysLeft(banItem) {
            if (banItem.type === 'permanent') return '∞';
            
            const bannedAt = new Date(banItem.bannedAt);
            const expiresAt = new Date(bannedAt.getTime() + (banItem.duration * 24 * 60 * 60 * 1000));
            const now = new Date();
            const diffTime = expiresAt - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            return diffDays > 0 ? diffDays : 0;
        }
        
        function removeNumber(index) {
            bannedNumbers.splice(index, 1);
            localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
            updateBannedList();
            updateStats();
            showNotification('Number removed from ban list');
        }
        
        function toggleBanType(index) {
            if (bannedNumbers[index].type === 'permanent') {
                bannedNumbers[index].type = 'temporary';
                bannedNumbers[index].duration = 30;
            } else {
                bannedNumbers[index].type = 'permanent';
                bannedNumbers[index].duration = -1;
            }
            
            bannedNumbers[index].bannedAt = new Date().toISOString();
            localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
            updateBannedList();
            updateStats();
            showNotification('Ban type updated');
        }
        
        function clearAllNumbers() {
            if (bannedNumbers.length === 0) {
                showNotification('Ban list is already empty', 'error');
                return;
            }
            
            if (confirm('Are you sure you want to clear all banned numbers? This action cannot be undone.')) {
                bannedNumbers = [];
                localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
                updateBannedList();
                updateStats();
                showNotification('All numbers removed from ban list');
            }
        }
        
        function refreshList() {
            updateBannedList();
            updateStats();
            showNotification('Ban list refreshed');
        }
        
        function importNumbers() {
            const input = importText.value.trim();
            if (!input) {
                showNotification('Please enter numbers to import', 'error');
                return;
            }
            
            // Parse numbers (support comma separated and new lines)
            const numbers = input.split(/[\n,]+/).map(num => num.trim()).filter(num => num);
            
            let addedCount = 0;
            let duplicatesCount = 0;
            let invalidCount = 0;
            
            numbers.forEach(number => {
                // Validate and format phone number
                const formattedNumber = formatPhoneNumber(number);
                
                if (!formattedNumber) {
                    invalidCount++;
                    return;
                }
                
                // Check if number is already in the list
                if (bannedNumbers.find(item => item.number === formattedNumber)) {
                    duplicatesCount++;
                    return;
                }
                
                // Add to banned list with default temporary ban
                bannedNumbers.push({
                    number: formattedNumber,
                    type: 'temporary',
                    duration: 30,
                    bannedAt: new Date().toISOString()
                });
                addedCount++;
            });
            
            // Save to localStorage
            localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
            
            // Update UI
            updateBannedList();
            updateStats();
            
            // Show notification
            let message = `${addedCount} number(s) imported to ban list.`;
            if (duplicatesCount > 0) message += ` ${duplicatesCount} duplicate(s) skipped.`;
            if (invalidCount > 0) message += ` ${invalidCount} invalid number(s) skipped.`;
            
            showNotification(message);
            
            // Clear import textarea
            importText.value = '';
        }
        
        function exportNumbers() {
            if (bannedNumbers.length === 0) {
                showNotification('No numbers to export', 'error');
                return;
            }
            
            const format = exportFormat.value;
            let content = '';
            let filename = '';
            let mimeType = '';
            
            switch (format) {
                case 'csv':
                    content = 'Phone Number,Ban Type,Duration (days),Banned At\n';
                    bannedNumbers.forEach(item => {
                        content += `${item.number},${item.type},${item.duration},${item.bannedAt}\n`;
                    });
                    filename = 'whatsapp_banned_numbers.csv';
                    mimeType = 'text/csv';
                    break;
                case 'txt':
                    bannedNumbers.forEach(item => {
                        content += `${item.number} - ${item.type} (${item.duration} days) - ${item.bannedAt}\n`;
                    });
                    filename = 'whatsapp_banned_numbers.txt';
                    mimeType = 'text/plain';
                    break;
                case 'json':
                    content = JSON.stringify(bannedNumbers, null, 2);
                    filename = 'whatsapp_banned_numbers.json';
                    mimeType = 'application/json';
                    break;
            }
            
            // Create download link
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(`Ban list exported as ${format.toUpperCase()}`);
        }
        
        function tempBanAll() {
            if (bannedNumbers.length === 0) {
                showNotification('No numbers to ban', 'error');
                return;
            }
            
            let updatedCount = 0;
            bannedNumbers.forEach(item => {
                if (item.type !== 'temporary') {
                    item.type = 'temporary';
                    item.duration = 30;
                    item.bannedAt = new Date().toISOString();
                    updatedCount++;
                }
            });
            
            if (updatedCount > 0) {
                localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
                updateBannedList();
                updateStats();
                showNotification(`${updatedCount} number(s) changed to temporary ban`);
            } else {
                showNotification('All numbers are already temporarily banned', 'warning');
            }
        }
        
        function permBanAll() {
            if (bannedNumbers.length === 0) {
                showNotification('No numbers to ban', 'error');
                return;
            }
            
            let updatedCount = 0;
            bannedNumbers.forEach(item => {
                if (item.type !== 'permanent') {
                    item.type = 'permanent';
                    item.duration = -1;
                    item.bannedAt = new Date().toISOString();
                    updatedCount++;
                }
            });
            
            if (updatedCount > 0) {
                localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
                updateBannedList();
                updateStats();
                showNotification(`${updatedCount} number(s) changed to permanent ban`);
            } else {
                showNotification('All numbers are already permanently banned', 'warning');
            }
        }
        
        function unbanExpired() {
            const expiredBans = bannedNumbers.filter(item => isBanExpired(item));
            
            if (expiredBans.length === 0) {
                showNotification('No expired temporary bans found', 'warning');
                return;
            }
            
            // Remove expired bans
            bannedNumbers = bannedNumbers.filter(item => !isBanExpired(item));
            localStorage.setItem('whatsappBannedNumbers', JSON.stringify(bannedNumbers));
            updateBannedList();
            updateStats();
            showNotification(`${expiredBans.length} expired temporary ban(s) removed`);
        }
        
        function simulateBanProcess() {
            commandOutput.innerHTML = '';
            addCommandOutput('Starting WhatsApp ban simulation...');
            
            if (bannedNumbers.length === 0) {
                addCommandOutput('ERROR: No numbers in ban list to simulate');
                return;
            }
            
            // Simulate banning process
            setTimeout(() => {
                addCommandOutput('Connecting to WhatsApp servers...');
                
                setTimeout(() => {
                    addCommandOutput('Authenticating with WhatsApp API...');
                    
                    setTimeout(() => {
                        addCommandOutput('Processing ban requests...');
                        
                        setTimeout(() => {
                            let successCount = 0;
                            let failCount = 0;
                            
                            bannedNumbers.forEach((item, index) => {
                                setTimeout(() => {
                                    const success = Math.random() > 0.2; // 80% success rate
                                    
                                    if (success) {
                                        addCommandOutput(`✓ SUCCESS: Number ${item.number} banned (${item.type})`);
                                        successCount++;
                                    } else {
                                        addCommandOutput(`✗ FAILED: Could not ban ${item.number}`);
                                        failCount++;
                                    }
                                    
                                    // Show final results
                                    if (index === bannedNumbers.length - 1) {
                                        setTimeout(() => {
                                            addCommandOutput(`\nBan simulation completed:`);
                                            addCommandOutput(`Successful bans: ${successCount}`);
                                            addCommandOutput(`Failed bans: ${failCount}`);
                                            addCommandOutput(`Success rate: ${Math.round((successCount / bannedNumbers.length) * 100)}%`);
                                        }, 500);
                                    }
                                }, index * 300);
                            });
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 500);
        }
        
        function addCommandOutput(text) {
            const p = document.createElement('p');
            p.textContent = text;
            p.style.margin = '5px 0';
            commandOutput.appendChild(p);
            commandOutput.scrollTop = commandOutput.scrollHeight;
        }
        
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = 'notification';
            
            if (type === 'error') {
                notification.classList.add('error');
            } else if (type === 'warning') {
                notification.classList.add('warning');
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
